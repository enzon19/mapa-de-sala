import{S as K,i as R,s as Y,C as T,D as z,E as q,m as w,h as k,n as M,p as D,F as P,b as Q,G as v,H as f,I as X,J as C,K as W,L as F,M as O,N as y,k as E,y as N,a as j,q as Z,l as S,z as U,c as J,r as x,A as L,u as $,g as V,d as A,B as G,o as ee,j as te,w as se}from"./index.b87f7290.js";import{s as H,f as ae,p as ne}from"./pt.46270c0d.js";import{D as B}from"./datetime.c484f364.js";import{a as oe}from"./ChevronBack.c1d68ae3.js";import{j as re}from"./singletons.1ca8bc12.js";function le(t){let e,a,u,l,i,d=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 512 512"},t[2],{width:t[0]},{height:t[0]},{fill:t[1]},{class:u=t[3].class}],h={};for(let n=0;n<d.length;n+=1)h=T(h,d[n]);return{c(){e=z("svg"),a=z("polyline"),this.h()},l(n){e=q(n,"svg",{xmlns:!0,viewBox:!0,width:!0,height:!0,fill:!0,class:!0});var r=w(e);a=q(r,"polyline",{points:!0,style:!0}),w(a).forEach(k),r.forEach(k),this.h()},h(){M(a,"points","184 112 328 256 184 400"),D(a,"fill","none"),D(a,"stroke",t[1]),D(a,"stroke-linecap","round"),D(a,"stroke-linejoin","round"),D(a,"stroke-width","48px"),P(e,h)},m(n,r){Q(n,e,r),v(e,a),l||(i=[f(e,"click",t[4]),f(e,"mouseenter",t[5]),f(e,"mouseleave",t[6]),f(e,"mouseover",t[7]),f(e,"mouseout",t[8]),f(e,"blur",t[9]),f(e,"focus",t[10])],l=!0)},p(n,[r]){r&2&&D(a,"stroke",n[1]),P(e,h=X(d,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 512 512"},r&4&&n[2],r&1&&{width:n[0]},r&1&&{height:n[0]},r&2&&{fill:n[1]},r&8&&u!==(u=n[3].class)&&{class:u}]))},i:C,o:C,d(n){n&&k(e),l=!1,W(i)}}}function ie(t,e,a){const u=["size","color"];let l=F(e,u),{size:i="24"}=e,{color:d="currentColor"}=e;function h(s){y.call(this,t,s)}function n(s){y.call(this,t,s)}function r(s){y.call(this,t,s)}function m(s){y.call(this,t,s)}function _(s){y.call(this,t,s)}function b(s){y.call(this,t,s)}function c(s){y.call(this,t,s)}return t.$$set=s=>{a(3,e=T(T({},e),O(s))),a(2,l=F(e,u)),"size"in s&&a(0,i=s.size),"color"in s&&a(1,d=s.color)},e=O(e),[i,d,l,e,h,n,r,m,_,b,c]}class ue extends K{constructor(e){super(),R(this,e,ie,le,Y,{size:0,color:1})}}const I=re("goto");function ce(t){let e,a,u,l,i,d,h,n,r,m,_,b;return u=new oe({props:{size:"2rem",class:"focus:outline-none focus:text-neutral-400"}}),r=new ue({props:{size:"2rem",class:"focus:outline-none focus:text-neutral-400"}}),{c(){e=E("div"),a=E("button"),N(u.$$.fragment),l=j(),i=E("button"),d=Z(t[1]),h=j(),n=E("button"),N(r.$$.fragment),this.h()},l(c){e=S(c,"DIV",{class:!0});var s=w(e);a=S(s,"BUTTON",{class:!0});var o=w(a);U(u.$$.fragment,o),o.forEach(k),l=J(s),i=S(s,"BUTTON",{class:!0});var g=w(i);d=x(g,t[1]),g.forEach(k),h=J(s),n=S(s,"BUTTON",{class:!0});var p=w(n);U(r.$$.fragment,p),p.forEach(k),s.forEach(k),this.h()},h(){M(a,"class","inline-block cursor-pointer"),M(i,"class","text-center px-2 py-1 cursor-pointer w-72"),M(n,"class","inline-block cursor-pointer"),M(e,"class","flex items-center gap-2 m-4 justify-center")},m(c,s){Q(c,e,s),v(e,a),L(u,a,null),v(e,l),v(e,i),v(i,d),t[9](i),v(e,h),v(e,n),L(r,n,null),m=!0,_||(b=[f(a,"click",t[2]),f(a,"keypress",t[2]),f(i,"click",t[4]),f(i,"keydown",t[8]),f(n,"click",t[3]),f(n,"keypress",t[3])],_=!0)},p(c,[s]){(!m||s&2)&&$(d,c[1])},i(c){m||(V(u.$$.fragment,c),V(r.$$.fragment,c),m=!0)},o(c){A(u.$$.fragment,c),A(r.$$.fragment,c),m=!1},d(c){c&&k(e),G(u),t[9](null),G(r),_=!1,W(b)}}}function de(t,e,a){let u,{requestedDate:l}=e,{route:i="dia"}=e,{checkInDatabase:d=!1}=e;async function h(){var g;let o;if(d){const{data:p}=await H.from("classroomMap").select("day").lt("day",l.toString()).order("day",{ascending:!1}).limit(1);o=B.fromISO((g=p[0])==null?void 0:g.day),o.isValid||(o=l.minus({day:1}))}else o=l.minus({day:1});I(`/${i}/`+o.toFormat("dd-MM"))}async function n(){var g;let o;if(d){const{data:p}=await H.from("classroomMap").select("day").gt("day",l.toString()).order("day",{ascending:!0}).limit(1);o=B.fromISO((g=p[0])==null?void 0:g.day),o.isValid||(o=l.plus({day:1}))}else o=l.plus({day:1});I(`/${i}/`+o.toFormat("dd-MM"))}let r,m;function _(){r.toggle()}function b(o){r=ae(o,{defaultDate:l.toJSDate(),dateFormat:"d-m-Y",minDate:"6-2-2023",maxDate:"8-12-2023",locale:ne.Portuguese,position:"auto center",clickOpens:!1,disableMobile:!0,onChange(g){const p=B.fromJSDate(g[0]);I(`/${i}/`+p.toFormat("dd-MM"))}})}ee(()=>{b(m)}),te(()=>{b(m)});const c=o=>o.key==="Enter"&&_();function s(o){se[o?"unshift":"push"](()=>{m=o,a(0,m)})}return t.$$set=o=>{"requestedDate"in o&&a(5,l=o.requestedDate),"route"in o&&a(6,i=o.route),"checkInDatabase"in o&&a(7,d=o.checkInDatabase)},t.$$.update=()=>{t.$$.dirty&32&&a(1,u=l.setLocale("pt-BR").toLocaleString({day:"numeric",month:"long",weekday:"long"}))},[m,u,h,n,_,l,i,d,c,s]}class pe extends K{constructor(e){super(),R(this,e,de,ce,Y,{requestedDate:5,route:6,checkInDatabase:7})}}export{pe as D};
